import { Button, Result } from "antd";
import React from "react";
import { useNavigate, useSearchParams } from "react-router-dom";
import postJson from "../../utils/api/postJson";

export default function JoinGroup() {
  const navigate = useNavigate();
  const [searchParams] = useSearchParams();
  const group = searchParams.get("group");
  const code = searchParams.get("code");

  const handleJoinGroup = () => {
    postJson({
      path: `/groups/${group}/join-group`,
      body: { userEmail: localStorage.getItem("userEmail"), inviteKey: code },
      success: () => {
        alert("Tham gia nhóm thành công!!!");
        navigate("/");
      }
    });
  };

  console.log({ group, code });

  return (
    <Result
      icon={
        <svg
          xmlns="http://www.w3.org/2000/svg"
          version="1.0"
          width="256.000000pt"
          height="256.000000pt"
          viewBox="0 0 512.000000 512.000000"
          preserveAspectRatio="xMidYMid meet"
        >
          <g
            transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)"
            fill="#000000"
            stroke="none"
          >
            <path d="M2559 5026 c-56 -15 -98 -39 -197 -115 l-77 -58 -140 -21 c-127 -18 -141 -19 -150 -4 -34 52 -32 52 -235 52 -189 0 -191 0 -215 -25 l-25 -24 0 -351 0 -351 25 -24 c24 -25 26 -25 210 -25 153 0 190 3 210 16 13 9 32 13 43 10 10 -4 76 -78 146 -166 146 -183 190 -225 260 -245 111 -33 163 -18 374 109 197 118 236 160 249 266 5 46 7 49 43 58 35 9 40 7 63 -19 l25 -29 192 0 c189 0 191 0 215 25 l25 24 0 351 0 351 -25 24 c-24 25 -26 25 -209 25 -152 0 -189 -3 -213 -16 -28 -16 -30 -16 -188 64 -226 113 -293 129 -406 98z m360 -255 l201 -101 0 -184 0 -184 -65 -16 c-35 -9 -68 -16 -73 -16 -5 0 -91 99 -191 219 -101 121 -189 222 -198 225 -29 12 -53 5 -135 -34 -85 -42 -130 -48 -136 -18 -4 20 207 183 265 204 70 26 116 13 332 -95z m-1079 -291 l0 -240 -80 0 -80 0 0 240 0 240 80 0 80 0 0 -240z m1600 0 l0 -240 -80 0 -80 0 0 240 0 240 80 0 80 0 0 -240z m-1280 165 c0 -67 69 -148 136 -161 56 -10 146 2 194 26 l43 22 23 -24 c12 -12 88 -102 168 -198 127 -153 146 -180 146 -211 0 -19 -6 -43 -12 -52 -7 -9 -80 -57 -163 -107 -159 -96 -194 -106 -253 -76 -15 8 -90 93 -166 189 -134 167 -143 176 -208 208 l-68 33 0 177 0 176 73 10 c39 6 75 11 80 12 4 0 7 -10 7 -24z" />
            <path d="M2205 3588 c-27 -5 -86 -27 -131 -48 -134 -65 -237 -184 -289 -335 -13 -35 -20 -97 -24 -210 l-6 -160 -33 58 c-18 31 -64 91 -104 132 -360 379 -963 325 -1248 -112 -89 -135 -121 -247 -127 -448 -4 -100 -9 -155 -18 -165 -66 -78 -81 -214 -32 -307 14 -28 31 -54 37 -58 5 -3 10 -33 10 -66 0 -50 -4 -64 -25 -84 -15 -16 -36 -25 -55 -25 -40 0 -80 -39 -80 -78 0 -38 78 -149 159 -226 l62 -58 -64 -67 c-35 -36 -78 -94 -96 -129 -58 -115 -61 -142 -61 -630 l0 -443 25 -24 24 -25 2431 0 2431 0 25 25 25 25 -3 473 -3 472 -26 66 c-38 98 -74 154 -141 220 -103 101 -181 131 -505 189 -150 27 -153 34 -60 125 34 34 75 85 92 113 l30 50 85 4 c130 7 207 53 261 158 45 86 28 227 -37 300 -9 11 -13 75 -16 260 l-3 245 -36 65 c-38 70 -104 128 -167 150 -31 10 -41 21 -60 64 -33 76 -72 118 -144 157 l-63 34 -335 0 c-323 0 -337 -1 -401 -23 -36 -12 -90 -38 -120 -57 l-54 -34 -18 35 c-27 52 -90 108 -151 135 -43 19 -56 31 -66 59 -20 55 -67 117 -113 148 -85 59 -109 62 -435 61 -163 -1 -319 -5 -347 -11z m652 -800 l103 -103 0 -165 c0 -227 -23 -304 -120 -400 -157 -158 -403 -158 -561 0 -92 92 -119 178 -119 385 l0 135 101 0 c126 0 220 21 296 66 63 38 145 113 171 157 9 15 19 27 21 27 3 0 52 -46 108 -102z m-857 -348 l0 -120 -32 0 c-62 0 -128 62 -128 120 0 58 66 120 128 120 l32 0 0 -120z m1211 105 c35 -19 69 -70 69 -105 0 -59 -66 -120 -130 -120 l-30 0 0 120 0 120 30 0 c17 0 44 -7 61 -15z m1006 -87 l103 -103 0 -125 c-1 -69 -5 -156 -9 -194 -18 -136 -105 -256 -229 -314 -50 -24 -69 -27 -162 -27 -99 0 -110 2 -171 32 -79 39 -150 111 -186 189 -30 66 -42 151 -43 297 l0 107 119 0 c141 0 215 19 307 78 54 35 154 135 154 154 0 19 21 2 117 -94z m-3124 6 c65 -56 174 -110 264 -129 37 -8 71 -15 76 -15 13 0 8 -282 -7 -335 -39 -147 -144 -252 -291 -291 -212 -57 -437 85 -484 304 -12 59 -15 322 -3 322 4 0 38 7 75 15 90 19 200 73 262 129 28 25 52 45 53 46 2 0 27 -20 55 -46z m-613 -344 l0 -120 -32 0 c-62 0 -128 62 -128 120 0 58 66 120 128 120 l32 0 0 -120z m1211 105 c35 -19 69 -70 69 -105 0 -59 -66 -120 -130 -120 l-30 0 0 120 0 120 30 0 c17 0 44 -7 61 -15z m394 -117 c17 -28 58 -79 93 -113 34 -34 62 -68 62 -76 0 -10 -52 -25 -200 -54 l-200 -41 0 53 c0 28 5 55 10 58 23 14 63 112 68 167 l5 58 66 0 66 0 30 -52z m992 -123 c47 -90 129 -137 253 -143 l85 -4 30 -50 c17 -28 59 -79 93 -113 36 -35 62 -70 60 -79 -2 -10 -21 7 -54 48 -57 69 -146 134 -227 164 -29 11 -139 37 -245 58 -147 30 -192 43 -192 54 0 8 27 41 59 72 32 31 67 70 77 88 l19 31 11 -43 c6 -24 20 -61 31 -83z m-417 -141 c0 -1 -22 -16 -50 -34 l-50 -32 -50 32 c-27 18 -50 33 -50 34 0 0 45 1 100 1 55 0 100 -1 100 -1z m-295 -130 c30 -20 53 -40 50 -43 -2 -4 -30 -28 -63 -54 l-59 -46 -33 72 c-17 40 -34 77 -37 84 -4 11 18 19 65 22 12 0 47 -15 77 -35z m532 23 c2 -2 -13 -40 -33 -85 l-37 -81 -59 46 c-33 26 -61 50 -63 54 -3 3 19 23 48 43 46 31 57 35 96 31 25 -3 46 -7 48 -8z m-1857 -212 c47 0 102 4 123 8 l37 8 0 -64 c0 -87 16 -105 100 -121 l65 -11 -160 -138 c-88 -75 -162 -137 -165 -137 -3 0 -77 62 -165 137 l-160 138 65 11 c84 16 100 34 100 121 l0 64 38 -8 c20 -4 75 -8 122 -8z m3010 -6 c0 -8 -42 -45 -67 -58 -12 -6 -40 -11 -63 -11 -23 0 -51 5 -63 11 -25 13 -67 50 -67 58 0 3 59 6 130 6 72 0 130 -3 130 -6z m-1590 -189 c-1 -8 -7 -26 -14 -39 -12 -22 -14 -21 -48 50 -19 41 -33 78 -30 82 6 12 92 -74 92 -93z m274 39 c-14 -28 -30 -62 -35 -77 l-11 -27 -13 25 c-8 14 -14 32 -15 40 0 18 80 101 92 94 4 -3 -4 -28 -18 -55z m1675 6 c127 -23 212 -45 248 -61 105 -50 190 -163 213 -283 5 -29 10 -148 10 -262 l0 -209 -120 0 -120 0 0 40 0 40 -80 0 -80 0 0 -200 0 -200 -400 0 -400 0 0 553 c0 303 -3 563 -7 577 -6 23 -4 22 37 -13 125 -107 315 -102 428 12 26 25 54 45 62 44 8 -2 102 -19 209 -38z m-3658 -275 c134 -115 254 -213 267 -216 12 -3 32 -3 45 0 12 3 100 74 196 156 96 83 176 150 178 150 2 0 3 -214 3 -475 l0 -475 -400 0 -400 0 0 89 c0 72 -5 99 -24 144 -28 62 -56 186 -56 247 0 56 27 181 51 237 11 25 18 47 17 48 -9 9 -127 65 -136 65 -11 0 -43 -70 -69 -155 -14 -46 -18 -92 -18 -200 1 -134 2 -144 34 -230 24 -63 35 -113 38 -167 l5 -78 -122 0 -121 0 3 403 3 402 32 67 c18 39 51 86 77 112 42 40 117 86 142 86 6 0 120 -94 255 -210z m4129 -780 l0 -80 -120 0 -120 0 0 80 0 80 120 0 120 0 0 -80z" />
          </g>
        </svg>
      }
      title="You are invited to join a group!"
      subTitle="You can Accept or Decline this invitation."
      extra={[
        <Button type="primary" key="console" onClick={handleJoinGroup}>
          Join
        </Button>,
        <Button key="buy">
          <a href="/">Decline</a>
        </Button>
      ]}
    />
  );
}
